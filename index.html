<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZonaX - Tecnologías y Electrónicos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .cart-item:hover {
            background-color: #f9fafb;
        }

        .category-btn.active {
            background-color: #01b42d;
            color: white;
        }

        #cart-dropdown {
            transition: all 0.3s ease;
        }

        .carousel-item {
            transition: transform 0.6s ease;
        }
    </style>
</head>
<body class="bg-gray-50">
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <img src="foto1.jpg.png" alt="Descripción de la imagen" alt="Logo de ZonaX Tecnologías y Electrónicos en letras modernas sobre fondo azul" class="w-10 h-10 rounded-full">
                <h1 class="text-xl font-bold text-gray-800">ZonaX</h1>
            </div>
            <div class="flex items-center space-x-4">
                <div class="relative">
                    <button id="cart-btn" class="relative p-2 text-black hover:text-green-500">
                        <i class="fas fa-shopping-cart text-xl"></i>
                        <span id="cart-count" class="absolute -top-1 -right-1 bg-green-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">0</span>
                    </button>
                    <div id="cart-dropdown" class="hidden absolute right-0 mt-2 w-80 bg-white rounded-md shadow-lg py-2 z-50 border border-gray-200">
                        <div class="px-4 py-2 border-b border-gray-200">
                            <h3 class="font-semibold text-gray-800">Tu Carrito</h3>
                        </div>
                        <div id="cart-items" class="max-h-96 overflow-y-auto">
                            <p class="text-center py-4 text-gray-500">Tu carrito está vacío</p>
                        </div>
                        <div class="px-4 py-2 border-t border-gray-200">
                            <div class="flex justify-between font-semibold text-gray-800">
                                <span>Total:</span>
                                <span id="cart-total">$0.00</span>
                            </div>
                            <button id="checkout-btn" class="mt-2 w-full bg-green-600 hover:bg-green-800 text-white py-2 rounded-md">Finalizar Compra</button>
                        </div>
                    </div>
                </div>
                <div class="relative">
                    <a href="#" id="user-btn" class="p-2 text-black hover:text-green-500">
                        <i class="fas fa-user text-xl"></i>
                    </a>

                    <div id="user-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-2 z-50 border border-gray-200">
                        <div class="px-4 py-2 font-semibold text-gray-800" id="userGreeting">Tu cuenta</div>
                        <button id="openLogin" class="w-full text-left px-4 py-2 hover:bg-gray-100" type="button">Iniciar sesión</button>
                        <button id="openRegister" class="w-full text-left px-4 py-2 hover:bg-gray-100" type="button">Crear cuenta</button>
                        <button id="logoutBtn" class="w-full text-left px-4 py-2 text-red-500 hover:text-red-700 hidden" type="button">Cerrar sesión</button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <section class="bg-gradient-to-r from-blue-600 to-blue-700 text-white py-12">
        <div class="container mx-auto px-4 flex flex-col md:flex-row items-center">
            <div class="md:w-1/3 flex justify-center mb-6 md:mb-0">
                <img src="foto1.jpg.png" alt="Dueño de ZonaX sonriendo con productos tecnológicos de fondo" class="w-48 h-48 rounded-full border-4 border-white shadow-lg">
            </div>
            <div class="md:w-2/3 md:pl-8 text-center md:text-left">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">ZonaX Tecnologías y Electrónicos</h2>
                <p class="text-lg mb-6">Todo lo que necesitas en tecnología al mejor precio del mercado</p>
                <div class="flex space-x-4 justify-center md:justify-start">

                    <a href="https://wa.me/5493435085937" class="bg-green-500 hover:bg-green-600 px-6 py-2 rounded-full flex items-center">
                        <i class="fab fa-whatsapp mr-2"></i> WhatsApp
                    </a>
                    <a href="https://instagram.com/zona.x.electro" class="bg-pink-500 hover:bg-pink-600 px-6 py-2 rounded-full flex items-center">
                        <i class="fab fa-instagram mr-2"></i> Instagram
                    </a>

                </div>
                <div class="mt-6">
                    <a href="https://maps.google.com/?q=ZonaX+Tecnologias" class="inline-flex items-center text-white hover:underline">
                        <i class="fas fa-map-marker-alt mr-2"></i> Ver ubicación de nuestro local
                    </a>
                </div>
            </div>
        </div>
    </section>

    <nav class="bg-white shadow-sm sticky top-16 z-40">
        <div class="container mx-auto px-4 overflow-x-auto">
            <div class="flex space-x-1 py-3">
                <button class="category-btn active px-4 py-2 rounded-md whitespace-nowrap" data-category="all">Todos</button>
                <button class="category-btn px-4 py-2 rounded-md whitespace-nowrap" data-category="celulares">Celulares</button>
                <button class="category-btn px-4 py-2 rounded-md whitespace-nowrap" data-category="Parlantes">Parlantes</button>
                <button class="category-btn px-4 py-2 rounded-md whitespace-nowrap" data-category="Play">Play</button>
                <button class="category-btn px-4 py-2 rounded-md whitespace-nowrap" data-category="pc">PC</button>
                <button class="category-btn px-4 py-2 rounded-md whitespace-nowrap" data-category="Stanley">Stanley</button>
                <button class="category-btn px-4 py-2 rounded-md whitespace-nowrap" data-category="accesorios">Accesorios</button>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-6">
        <div class="relative max-w-2xl mx-auto">
            <input type="text" id="search-input" placeholder="Buscar productos..." class="w-full pl-10 pr-4 py-3 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500">
            <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
        </div>
    </div>

    <section class="container mx-auto px-4 py-8">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">Productos Destacados</h2>
        <div class="relative">
            <div class="carousel-container overflow-hidden relative">
                <div class="carousel-track flex transition-transform duration-300 ease-in-out" id="carousel-track">
                    <div class="carousel-item flex-shrink-0 w-full md:w-1/2 lg:w-1/3 px-2">
                        <div class="bg-white rounded-lg shadow-md overflow-hidden product-card transition duration-300">
                            <img src="redmin.jpg" alt="Redmi A5 con caja y celular" class="w-full h-48 object-cover">
                            <div class="p-4">
                                <h3 class="font-semibold text-lg mb-1">Redmi A5 128/8 📲</h3>
                                <p class="text-sm text-red-500 font-bold mb-2">IDEAL PARA REVENTA🔥</p>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="font-bold text-green-600 current-price" data-id="17">$115.00</span>
                                    <button class="add-to-cart bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-md text-sm" data-id="17">Agregar</button>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="flex items-center border border-gray-300 rounded-md">
                                        <button class="decrease-quantity px-2 py-1 text-gray-600 hover:bg-gray-100" data-id="17">-</button>
                                        <span class="px-2 py-1 text-sm quantity-display" data-id="17">0</span>
                                        <button class="increase-quantity px-2 py-1 text-gray-600 hover:bg-gray-100" data-id="17">+</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item flex-shrink-0 w-full md:w-1/2 lg:w-1/3 px-2">
                        <div class="bg-white rounded-lg shadow-md overflow-hidden product-card transition duration-300">
                            <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/0531203a-0327-4a9c-8ff3-b8b8a37c6ae4.png" alt="Laptop ultradelgada de 15 pulgadas con teclado retroiluminado en color plata" class="w-full h-48 object-cover">
                            <div class="p-4">
                                <h3 class="font-semibold text-lg mb-1">Laptop Ultrabook</h3>
                                <p class="text-gray-600 mb-2">15.6", i7, 16GB, 512GB SSD</p>
                                <div class="flex justify-between items-center">
                                    <span class="font-bold text-green-600 current-price" data-id="9">$1,599.99</span>
                                    <div class="flex items-center space-x-2">
                                        <div class="flex items-center border border-gray-300 rounded-md">
                                            <button class="decrease-quantity px-2 py-1 text-gray-600 hover:bg-gray-100" data-id="9">-</button>
                                            <span class="px-2 py-1 text-sm quantity-display" data-id="9">0</span>
                                            <button class="increase-quantity px-2 py-1 text-gray-600 hover:bg-gray-100" data-id="9">+</button>
                                        </div>
                                        <button class="add-to-cart bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-md text-sm" data-id="9">Agregar</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <button id="carousel-prev" class="absolute left-0 top-1/2 transform -translate-y-1/2 bg-white rounded-full shadow-md p-2 ml-2 text-gray-800 hover:bg-gray-100">
                <i class="fas fa-chevron-left"></i>
            </button>
            <button id="carousel-next" class="absolute right-0 top-1/2 transform -translate-y-1/2 bg-white rounded-full shadow-md p-2 mr-2 text-gray-800 hover:bg-gray-100">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </section>

    <section class="container mx-auto px-4 py-8" id="products-section">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">Nuestros Productos</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
        </div>
    </section>

    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">ZonaX</h3>
                    <p class="mb-4">Tu tienda de tecnología y electrónicos de confianza con los mejores precios y garantía.</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4">Contacto</h3>
                    <ul class="space-y-2">
                        <li><i class="fas fa-map-marker-alt mr-2"></i> Paraná, Entre Rios</li>
                        <li><i class="fas fa-phone-alt mr-2"></i> +54 9 343 508-5937</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4">Horarios</h3>
                    <ul class="space-y-2">
                        <li>Lunes a Viernes: 9:00 - 22:00</li>
                        <li>Sábados: 9:00 - 22:00</li>
                        <li>Domingos: Cerrado</li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-400">
                <p>© 2025 ZonaX Tecnologías y Electrónicos. Todos los derechos reservados.</p>
            </div>
        </div>

    </footer>

    <script>
        // Product data
        const products = [
            // Celulares
            // NUEVO PRODUCTOS CON PRECIOS POR VOLUMEN
            {
                id: 1,
                name: "Redmi A5 128/8 📲",
                description: "IDEAL PARA REVENTA🔥",
                price: 115.00, // Precio base (1 unidad) en USD
                category: "celulares",
                image: "redmia5.jpg",
                alt: "Redmi A5 para reventa",
                // Estructura de precios por volumen (cantidad mínima requerida: precio unitario)
                bulkPricing: [
                    { qty: 20, price: 93.00 },
                    { qty: 10, price: 100.00 },
                    { qty: 5, price: 105.00 },
                    { qty: 3, price: 110.00 },
                    { qty: 1, price: 115.00 } // Siempre debe haber una entrada para 1
                ]
            },
            {
                id: 2,
                name: "Redmi 14C 256/16 📲",
                description: "14C IDEAL PARA REVENTA🔥",
                price: 140.00, // Precio base (1 unidad) en USD
                category: "celulares",
                image: "redmin.jpg",
                alt: "Increibles promociones que no te podes perder",
                // Estructura de precios por volumen (cantidad mínima requerida: precio unitario)
                bulkPricing: [
                    { qty: 10, price: 120.00 },
                    { qty: 5, price: 125.00 },
                    { qty: 3, price: 130.00 },
                    { qty: 1, price: 140.00 } // Siempre debe haber una entrada para 1
                ]
            },

            // Parlantes
            {
                id: 3,
                name: "JBL GO 3/4 🎶",
                description: "CERTIFICADOS / COLORES MIXTOS‼️",
                price: 12.00, // Precio base (1 unidad) en USD
                category: "Parlantes",
                image: "jbl.jpg",
                alt: "JBL IDEAL PARA REVENDER🎶",
                // Estructura de precios por volumen (cantidad mínima requerida: precio unitario)
                bulkPricing: [
                    { qty: 100, price: 7.50 },
                    { qty: 50, price: 8.50 },
                    { qty: 30, price: 9.00 },
                    { qty: 15, price: 9.50 },
                    { qty: 5, price: 10.50 },
                    { qty: 1, price: 12.00 } // Siempre debe haber una entrada para 1
                ]
            },
            // Accesorios
            { id: 13, name: "Redmi Airdotspro ", description: "AirDotsPro Redmi", price: 24480, category: "accesorios", image: "air.jpg", alt: "Auriculares Airdotspro Redmi negros con cancelación de ruido y estuche de carga" },
            { id: 14, name: "Cargador y cable Iphone", description: "20W, puerto USB-C", price: 67986.40, category: "accesorios", image: "cargador.jpg", alt: "Cargador con cable para iphone rápido con puerto usb-c" },
            { id: 15, name: "Airpod Pro Apple", description: "Airpods pro", price: 34000, category: "accesorios", image: "airpro.jpg", alt: "Auriculares Airpods pro blancos de apple con cancelación de ruido " },
            { id: 16, name: "Auriculares inalámbricos de alta gama", description: "Airpods Max", price: 65280, category: "accesorios", image: "airpodmax.jpg", alt: "Auriculares Airpods Max varios colores con cancelación de ruido " },
        ];


        // Cart functionality
        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        // DOM Elements
        const cartBtn = document.getElementById('cart-btn');
        const cartDropdown = document.getElementById('cart-dropdown');
        const cartItemsContainer = document.getElementById('cart-items');
        const cartCount = document.getElementById('cart-count');
        const cartTotal = document.getElementById('cart-total');
        const checkoutBtn = document.getElementById('checkout-btn');
        const productsContainer = document.getElementById('products-section').querySelector('.grid');
        const searchInput = document.getElementById('search-input');
        const categoryBtns = document.querySelectorAll('.category-btn');
        const carouselTrack = document.getElementById('carousel-track');
        const carouselPrev = document.getElementById('carousel-prev');
        const carouselNext = document.getElementById('carousel-next');

        // Carousel functionality
        let currentSlide = 0;
        let slideWidth = 0;
        const numSlides = document.querySelectorAll('.carousel-item').length;

        window.addEventListener('load', () => {
            const firstSlide = document.querySelector('.carousel-item');
            if (firstSlide) {
                slideWidth = firstSlide.offsetWidth;
                updateProductQuantities();
            }
        });

        function updateCarousel() {
            if (slideWidth > 0) {
                carouselTrack.style.transform = `translateX(-${currentSlide * slideWidth}px)`;
            }
        }

        carouselPrev.addEventListener('click', () => {
            currentSlide = Math.max(0, currentSlide - 1);
            updateCarousel();
        });

        carouselNext.addEventListener('click', () => {
            currentSlide = Math.min(numSlides - 1, currentSlide + 1);
            updateCarousel();
        });

        // 🌟 NUEVA FUNCIÓN: Lógica de Precio por Volumen 🌟
        function getBulkPrice(product, quantity) {
            // Si el producto no tiene bulkPricing, retorna su precio base
            if (!product.bulkPricing) {
                return product.price;
            }

            // Busca el precio más bajo basado en la cantidad
            // Asume que bulkPricing está ordenado de mayor a menor cantidad
            for (const tier of product.bulkPricing) {
                if (quantity >= tier.qty) {
                    return tier.price;
                }
            }
            // Si no cumple con ningún tier (ej: quantity es 0 o menor que el tier más bajo), retorna el precio base
            return product.price;
        }

        // Cart functions
        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = count;
        }

        function updateCartTotal() {
            const total = cart.reduce((sum, item) => {
                const product = products.find(p => p.id === item.id);
                if (!product) return sum;

                // Usa la nueva función para obtener el precio unitario
                const unitPrice = getBulkPrice(product, item.quantity);

                return sum + (unitPrice * item.quantity);
            }, 0);

            // Determinar si mostrar como USD o como la moneda original (ej. ARS/número grande)
            // Asumiendo que precios menores a 1000 son USD (como el Redmi A5)
            const currencySymbol = (total < 1000 && products.some(p => p.bulkPricing)) ? '$' : '$';

            cartTotal.textContent = `${currencySymbol}${total.toFixed(2)}`;
        }

        function renderCartItems() {
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p class="text-center py-4 text-gray-500">Tu carrito está vacío</p>';
                return;
            }

            cartItemsContainer.innerHTML = '';

            cart.forEach(item => {
                const product = products.find(p => p.id === item.id);
                if (!product) return;

                // Obtener el precio unitario actual
                const unitPrice = getBulkPrice(product, item.quantity);
                const currencySymbol = (unitPrice < 1000 && product.bulkPricing) ? 'USD' : '';

                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item px-4 py-3 flex items-center justify-between hover:bg-gray-50';
                cartItem.innerHTML = `
                        <div class="flex items-center">
                            <img src="${product.image}" alt="${product.alt}" class="w-16 h-16 object-cover rounded-md">
                            <div class="ml-3">
                                <h4 class="font-medium text-gray-800">${product.name}</h4>
                                <p class="text-sm text-gray-600">${currencySymbol}$${unitPrice.toFixed(2)} x ${item.quantity}</p>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <div class="flex items-center border border-gray-300 rounded-md">
                                <button class="decrease-quantity-cart px-2 py-1 text-gray-600 hover:bg-gray-100" data-id="${product.id}">-</button>
                                <span class="px-2 py-1 text-sm">${item.quantity}</span>
                                <button class="increase-quantity-cart px-2 py-1 text-gray-600 hover:bg-gray-100" data-id="${product.id}">+</button>
                            </div>
                            <button class="remove-item ml-3 text-red-500 hover:text-red-700" data-id="${product.id}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;

                cartItemsContainer.appendChild(cartItem);
            });

            document.querySelectorAll('.decrease-quantity-cart').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.currentTarget.dataset.id);
                    updateCartItem(id, -1);
                });
            });

            document.querySelectorAll('.increase-quantity-cart').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.currentTarget.dataset.id);
                    updateCartItem(id, 1);
                });
            });

            document.querySelectorAll('.remove-item').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.currentTarget.dataset.id);
                    removeCartItem(id);
                });
            });
        }

        function updateCartItem(id, change) {
            const index = cart.findIndex(item => item.id === id);

            if (index !== -1) {
                cart[index].quantity += change;

                if (cart[index].quantity <= 0) {
                    cart.splice(index, 1);
                }

                saveCart();
                updateCartDisplay();
                updateProductQuantity(id);
            } else if (change > 0) {
                addToCart(id);
            }
        }

        function removeCartItem(id) {
            cart = cart.filter(item => item.id !== id);
            saveCart();
            updateCartDisplay();
            updateProductQuantity(id);
        }

        function addToCart(id) {
            const existingItem = cart.find(item => item.id === id);

            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ id, quantity: 1 });
            }

            saveCart();
            updateCartDisplay();
            updateProductQuantity(id);

            cartDropdown.classList.remove('hidden');
        }

        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        function updateCartDisplay() {
            updateCartCount();
            updateCartTotal();
            renderCartItems();
        }

        // Product functions
        function renderProducts(filteredProducts = products) {
            productsContainer.innerHTML = '';

            filteredProducts.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'bg-white rounded-lg shadow-md overflow-hidden product-card transition duration-300 hover:shadow-lg';

                const cartItem = cart.find(item => item.id === product.id);
                const currentQuantity = cartItem ? cartItem.quantity : 0;

                // Obtener el precio actual por unidad para mostrarlo en la tarjeta
                const currentUnitPrice = getBulkPrice(product, currentQuantity || 1);

                // Mostrar la tabla de precios si existe
                let bulkPricingHTML = '';
                if (product.bulkPricing) {
                    const currency = (product.price < 1000) ? 'USD' : '';
                    bulkPricingHTML = `
                            <div class="mt-2 text-xs text-gray-700 p-2 bg-gray-100 rounded-md">
                                <p class="font-semibold mb-1">Precios por Volumen:</p>
                                ${product.bulkPricing.map(tier =>
                        `<p>${tier.qty}x ${currency}$${tier.price.toFixed(2)} c/u</p>`
                    ).join('')}
                            </div>
                        `;
                }

                productCard.innerHTML = `
                        <img src="${product.image}" alt="${product.alt}" class="w-full h-48 object-cover">
                        <div class="p-4">
                            <h3 class="font-semibold text-lg mb-1">${product.name}</h3>
                            <p class="text-gray-600 mb-2">${product.description}</p>
                            ${bulkPricingHTML}
                            <div class="flex justify-between items-center mt-3">
                                <span class="font-bold text-green-600 current-price" data-id="${product.id}">$${currentUnitPrice.toFixed(2)}</span>
                                <div class="flex items-center space-x-2">
                                    <div class="flex items-center border border-gray-300 rounded-md">
                                        <button class="decrease-quantity px-2 py-1 text-gray-600 hover:bg-gray-100" data-id="${product.id}">-</button>
                                        <span class="px-2 py-1 text-sm quantity-display" data-id="${product.id}">${currentQuantity}</span>
                                        <button class="increase-quantity px-2 py-1 text-gray-600 hover:bg-gray-100" data-id="${product.id}">+</button>
                                    </div>
                                    <button class="add-to-cart bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-md text-sm" data-id="${product.id}">Agregar</button>
                                </div>
                            </div>
                        </div>
                    `;

                productsContainer.appendChild(productCard);
            });
        }

        function updateProductQuantities() {
            // Actualiza las cantidades y precios en la grilla y carrusel
            document.querySelectorAll('.quantity-display').forEach(display => {
                const id = parseInt(display.dataset.id);
                const cartItem = cart.find(item => item.id === id);
                const currentQuantity = cartItem ? cartItem.quantity : 0;
                display.textContent = currentQuantity;

                // Actualizar el precio unitario en la vista de la tarjeta
                const priceDisplay = document.querySelector(`.current-price[data-id="${id}"]`);
                if (priceDisplay) {
                    const product = products.find(p => p.id === id);
                    if (product) {
                        const newPrice = getBulkPrice(product, currentQuantity || 1);
                        priceDisplay.textContent = `$${newPrice.toFixed(2)}`;
                    }
                }
            });
        }

        function updateProductQuantity(id) {
            const cartItem = cart.find(item => item.id === id);
            const currentQuantity = cartItem ? cartItem.quantity : 0;

            // 1. Actualizar la cantidad
            document.querySelectorAll(`.quantity-display[data-id="${id}"]`).forEach(display => {
                display.textContent = currentQuantity;
            });

            // 2. Actualizar el precio unitario en la vista de la tarjeta (grilla y carrusel)
            document.querySelectorAll(`.current-price[data-id="${id}"]`).forEach(priceDisplay => {
                const product = products.find(p => p.id === id);
                if (product) {
                    const newPrice = getBulkPrice(product, currentQuantity || 1);
                    priceDisplay.textContent = `$${newPrice.toFixed(2)}`;
                }
            });
        }

        function filterProducts() {
            const searchTerm = searchInput.value.toLowerCase();
            const activeCategory = document.querySelector('.category-btn.active').dataset.category;

            let filtered = products;

            if (activeCategory !== 'all') {
                filtered = filtered.filter(product => product.category.toLowerCase() === activeCategory.toLowerCase());
            }

            if (searchTerm) {
                filtered = filtered.filter(product =>
                    product.name.toLowerCase().includes(searchTerm) ||
                    product.description.toLowerCase().includes(searchTerm)
                );
            }

            renderProducts(filtered);
            updateProductQuantities();
        }

        // Event listeners (Categorías, Búsqueda, Carrito, Delegación)
        cartBtn.addEventListener('click', () => {
            cartDropdown.classList.toggle('hidden');
        });

        document.addEventListener('click', (e) => {
            if (!cartDropdown.contains(e.target) && !cartBtn.contains(e.target) && !cartDropdown.classList.contains('hidden')) {
                cartDropdown.classList.add('hidden');
            }
        });

        categoryBtns.forEach(btn => {
            btn.addEventListener('click', (e) => {
                categoryBtns.forEach(b => b.classList.remove('active'));
                e.target.classList.add('active');
                filterProducts();
            });
        });

        searchInput.addEventListener('input', filterProducts);


        // 🌟 DELEGACIÓN DE EVENTOS 1: GRILLA DE PRODUCTOS 🌟
        productsContainer.addEventListener('click', (e) => {
            const target = e.target.closest('button');

            if (!target) return;

            const id = parseInt(target.dataset.id);

            if (target.classList.contains('add-to-cart')) {
                addToCart(id);
            } else if (target.classList.contains('increase-quantity')) {
                updateCartItem(id, 1);
            } else if (target.classList.contains('decrease-quantity')) {
                updateCartItem(id, -1);
            }
        });

        // 🌟 DELEGACIÓN DE EVENTOS 2: CARRUSEL DE PRODUCTOS 🌟
        carouselTrack.addEventListener('click', (e) => {
            const target = e.target.closest('button');

            if (!target) return;

            const id = parseInt(target.dataset.id);

            if (target.classList.contains('add-to-cart')) {
                addToCart(id);
            } else if (target.classList.contains('increase-quantity')) {
                updateCartItem(id, 1);
            } else if (target.classList.contains('decrease-quantity')) {
                updateCartItem(id, -1);
            }
        });


        // Initial setup
        updateCartDisplay();
        renderProducts();
    </script>
</body>
</html>